module.exports=[1491,(a,b,c)=>{"use strict";b.exports=a.r(63331).vendored["react-ssr"].ReactServerDOMTurbopackClient},84756,75133,a=>{"use strict";var b=a.i(48137);let c=(0,b.default)("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);a.s(["DollarSign",()=>c],84756);let d=(0,b.default)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);a.s(["AlertTriangle",()=>d],75133)},98241,a=>{"use strict";let b=(0,a.i(48137).default)("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);a.s(["ShoppingCart",()=>b],98241)},97033,a=>{"use strict";let b=(0,a.i(48137).default)("RotateCcw",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]]);a.s(["RotateCcw",()=>b],97033)},67669,a=>{"use strict";let b=(0,a.i(48137).default)("RefreshCw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);a.s(["RefreshCw",()=>b],67669)},67711,a=>{"use strict";var b=a.i(42e3),c=a.i(33332);let d={primary:"bg-primary/10 text-primary",success:"bg-success/10 text-success",warning:"bg-warning/10 text-warning",danger:"bg-danger/10 text-danger"};function e({title:a,value:e,icon:f,isCurrency:g=!1,color:h}){return(0,b.jsxs)("div",{className:"bg-surface rounded-2xl p-6 shadow-sm border border-border",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,b.jsx)("span",{className:"text-text-muted text-lg",children:a}),(0,b.jsx)("div",{className:`p-3 rounded-xl ${d[h]}`,children:(0,b.jsx)(f,{size:28})})]}),(0,b.jsx)("p",{className:"text-3xl font-bold text-text",children:g?(0,c.formatCurrency)(e):e.toLocaleString("ar-SA")})]})}a.s(["StatCard",()=>e])},48220,a=>{"use strict";let b=(0,a.i(48137).default)("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);a.s(["TrendingUp",()=>b],48220)},13855,a=>{"use strict";let b=(0,a.i(48137).default)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);a.s(["Calendar",()=>b],13855)},80243,a=>{"use strict";var b=a.i(42e3),c=a.i(41771),d=a.i(67711),e=a.i(84756),f=a.i(48220),g=a.i(75773),h=a.i(98241),i=a.i(75133),j=a.i(48137);let k=(0,j.default)("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);var l=a.i(13855);let m=(0,j.default)("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),n=(0,j.default)("History",[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]]);var o=a.i(33332),p=a.i(83397),q=a.i(99826),r=a.i(972),s=a.i(67815);let t=[{value:1,label:"يناير"},{value:2,label:"فبراير"},{value:3,label:"مارس"},{value:4,label:"أبريل"},{value:5,label:"مايو"},{value:6,label:"يونيو"},{value:7,label:"يوليو"},{value:8,label:"أغسطس"},{value:9,label:"سبتمبر"},{value:10,label:"أكتوبر"},{value:11,label:"نوفمبر"},{value:12,label:"ديسمبر"}];function u({products:a,orders:j,orderItems:u,savedReports:v}){let w=new Date,[x,y]=(0,c.useState)(w.getMonth()+1),[z,A]=(0,c.useState)(w.getFullYear()),[B,C]=(0,c.useState)("current"),[D,E]=(0,c.useState)(null),[F,G]=(0,c.useState)(!1),H=j.filter(a=>{let b=new Date(a.created_at);return b.getMonth()+1===x&&b.getFullYear()===z}),I=H.filter(a=>"مكتمل"===a.status),J=I.reduce((a,b)=>a+Number(b.total_amount),0),K=I.reduce((a,b)=>a+Number(b.total_profit),0),L=I.reduce((a,b)=>a+Number(b.total_cost),0),M=I.length,N=H.map(a=>a.id),O=u.filter(a=>N.includes(a.order_id)),P={};O.forEach(a=>{let b=j.find(b=>b.id===a.order_id);b?.status!=="ملغي"&&(P[a.product_id]||(P[a.product_id]={name:a.product_name,quantity:0,revenue:0}),P[a.product_id].quantity+=a.quantity,P[a.product_id].revenue+=Number(a.total_price))});let Q=Object.values(P).sort((a,b)=>b.quantity-a.quantity).slice(0,5),R=a.filter(a=>a.quantity<=a.low_stock_threshold).sort((a,b)=>a.quantity-b.quantity),S=a.reduce((a,b)=>a+b.purchase_price*b.quantity,0),T=async()=>{G(!0);let a=(0,r.createClient)(),b={month:x,year:z,total_sales:J,total_cost:L,total_profit:K,total_orders:M,top_products:Q,updated_at:new Date().toISOString()},{error:c}=await a.from("monthly_reports").upsert(b,{onConflict:"month,year"});c?s.toast.error("حدث خطأ أثناء حفظ التقرير"):s.toast.success(`تم حفظ تقرير ${t[x-1].label} ${z}`),G(!1)},U=()=>{C("current"),E(null)},V="saved"===B&&D?{totalSales:Number(D.total_sales),totalProfit:Number(D.total_profit),totalCost:Number(D.total_cost),totalOrders:D.total_orders,topProducts:D.top_products||[],monthLabel:`${t[D.month-1].label} ${D.year}`}:{totalSales:J,totalProfit:K,totalCost:L,totalOrders:M,topProducts:Q,monthLabel:`${t[x-1].label} ${z}`},W=Array.from({length:5},(a,b)=>w.getFullYear()-b);return(0,b.jsx)("main",{className:"flex-1 p-4 lg:p-8",children:(0,b.jsxs)("div",{className:"max-w-7xl mx-auto",children:[(0,b.jsxs)("div",{className:"mb-8 pt-16 lg:pt-0",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold text-text",children:"التقارير"}),(0,b.jsx)("p",{className:"text-text-muted mt-2",children:"نظرة تفصيلية على أداء متجرك"})]}),(0,b.jsx)("div",{className:"bg-surface rounded-2xl p-6 shadow-sm border border-border mb-8",children:(0,b.jsxs)("div",{className:"flex flex-col lg:flex-row items-start lg:items-center justify-between gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)(l.Calendar,{className:"text-primary",size:24}),(0,b.jsx)("h2",{className:"text-xl font-bold text-text",children:"اختر الفترة"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap items-center gap-4",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-text-muted",children:"الشهر:"}),(0,b.jsxs)(q.Select,{value:x.toString(),onValueChange:a=>{y(Number(a)),U()},children:[(0,b.jsx)(q.SelectTrigger,{className:"w-32",children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsx)(q.SelectContent,{children:t.map(a=>(0,b.jsx)(q.SelectItem,{value:a.value.toString(),children:a.label},a.value))})]})]}),(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)("label",{className:"text-text-muted",children:"السنة:"}),(0,b.jsxs)(q.Select,{value:z.toString(),onValueChange:a=>{A(Number(a)),U()},children:[(0,b.jsx)(q.SelectTrigger,{className:"w-28",children:(0,b.jsx)(q.SelectValue,{})}),(0,b.jsx)(q.SelectContent,{children:W.map(a=>(0,b.jsx)(q.SelectItem,{value:a.toString(),children:a},a))})]})]}),(0,b.jsxs)(p.Button,{onClick:T,disabled:F,className:"gap-2",children:[(0,b.jsx)(m,{size:18}),F?"جاري الحفظ...":"حفظ التقرير"]})]})]})}),v.length>0&&(0,b.jsxs)("div",{className:"bg-surface rounded-2xl p-6 shadow-sm border border-border mb-8",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3 mb-4",children:[(0,b.jsx)(n,{className:"text-primary",size:24}),(0,b.jsx)("h2",{className:"text-xl font-bold text-text",children:"التقارير المحفوظة"})]}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[v.map(a=>(0,b.jsxs)(p.Button,{variant:"saved"===B&&D?.id===a.id?"default":"outline",size:"sm",onClick:()=>{E(a),C("saved")},className:"gap-2",children:[t[a.month-1].label," ",a.year]},a.id)),"saved"===B&&(0,b.jsx)(p.Button,{variant:"ghost",size:"sm",onClick:U,children:"العودة للعرض الحالي"})]})]}),(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)("h3",{className:"text-xl font-bold text-primary",children:"saved"===B?`تقرير ${V.monthLabel} (محفوظ)`:`تقرير ${V.monthLabel}`})}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8",children:[(0,b.jsx)(d.StatCard,{title:"إجمالي المبيعات",value:V.totalSales,icon:e.DollarSign,isCurrency:!0,color:"primary"}),(0,b.jsx)(d.StatCard,{title:"إجمالي الأرباح",value:V.totalProfit,icon:f.TrendingUp,isCurrency:!0,color:"success"}),(0,b.jsx)(d.StatCard,{title:"إجمالي التكلفة",value:V.totalCost,icon:g.Package,isCurrency:!0,color:"warning"}),(0,b.jsx)(d.StatCard,{title:"عدد الطلبات المكتملة",value:V.totalOrders,icon:h.ShoppingCart,color:"primary"}),(0,b.jsx)(d.StatCard,{title:"قيمة المخزون",value:S,icon:g.Package,isCurrency:!0,color:"primary"}),(0,b.jsx)(d.StatCard,{title:"منتجات تحتاج تعبئة",value:R.length,icon:i.AlertTriangle,color:R.length>0?"danger":"success"})]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,b.jsxs)("div",{className:"bg-surface rounded-2xl p-6 shadow-sm border border-border",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-text flex items-center gap-2 mb-6",children:[(0,b.jsx)(k,{className:"text-warning",size:24}),"المنتجات الأكثر مبيعاً"]}),0===V.topProducts.length?(0,b.jsx)("p",{className:"text-text-muted text-center py-8",children:"لا توجد مبيعات في هذه الفترة"}):(0,b.jsx)("div",{className:"space-y-3",children:V.topProducts.map((a,c)=>(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-background rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[(0,b.jsx)("span",{className:`w-8 h-8 rounded-full flex items-center justify-center text-white font-bold ${0===c?"bg-warning":1===c?"bg-text-muted":"bg-amber-600"}`,children:c+1}),(0,b.jsx)("span",{className:"font-medium text-text",children:a.name})]}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsxs)("p",{className:"font-bold text-text",children:[a.quantity," قطعة"]}),(0,b.jsx)("p",{className:"text-sm text-text-muted",children:(0,o.formatCurrency)(a.revenue)})]})]},a.name))})]}),(0,b.jsxs)("div",{className:"bg-surface rounded-2xl p-6 shadow-sm border border-border",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-text flex items-center gap-2 mb-6",children:[(0,b.jsx)(i.AlertTriangle,{className:"text-danger",size:24}),"منتجات تحتاج إعادة تعبئة"]}),0===R.length?(0,b.jsx)("p",{className:"text-text-muted text-center py-8",children:"جميع المنتجات متوفرة بكميات كافية"}):(0,b.jsx)("div",{className:"space-y-3",children:R.map(a=>{let c=(0,o.getStockStatus)(a.quantity,a.low_stock_threshold);return(0,b.jsxs)("div",{className:"flex items-center justify-between p-4 bg-background rounded-xl",children:[(0,b.jsxs)("div",{className:"flex items-center gap-3",children:[a.image_url?(0,b.jsx)("img",{src:a.image_url||"/placeholder.svg",alt:a.name,className:"w-10 h-10 rounded-lg object-cover"}):(0,b.jsx)("div",{className:"w-10 h-10 rounded-lg bg-border flex items-center justify-center",children:(0,b.jsx)(g.Package,{size:16,className:"text-text-muted"})}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"font-medium text-text",children:a.name}),(0,b.jsxs)("p",{className:"text-sm text-text-muted",children:["كود: ",a.code]})]})]}),(0,b.jsxs)("div",{className:"text-left",children:[(0,b.jsxs)("p",{className:"font-bold text-text",children:[a.quantity," قطعة"]}),(0,b.jsx)("span",{className:`text-xs px-2 py-1 rounded-full ${(0,o.getStockStatusColor)(c)}`,children:c})]})]},a.id)})})]}),(0,b.jsxs)("div",{className:"bg-surface rounded-2xl p-6 shadow-sm border border-border lg:col-span-2",children:[(0,b.jsxs)("h2",{className:"text-xl font-bold text-text flex items-center gap-2 mb-6",children:[(0,b.jsx)(f.TrendingUp,{className:"text-success",size:24}),"ملخص الأداء المالي - ",V.monthLabel]}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,b.jsxs)("div",{className:"bg-background rounded-xl p-4 text-center",children:[(0,b.jsx)("p",{className:"text-text-muted mb-2",children:"إجمالي المبيعات"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-primary",children:(0,o.formatCurrency)(V.totalSales)})]}),(0,b.jsxs)("div",{className:"bg-background rounded-xl p-4 text-center",children:[(0,b.jsx)("p",{className:"text-text-muted mb-2",children:"إجمالي التكلفة"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-warning",children:(0,o.formatCurrency)(V.totalCost)})]}),(0,b.jsxs)("div",{className:"bg-background rounded-xl p-4 text-center",children:[(0,b.jsx)("p",{className:"text-text-muted mb-2",children:"صافي الربح"}),(0,b.jsx)("p",{className:"text-2xl font-bold text-success",children:(0,o.formatCurrency)(V.totalProfit)})]}),(0,b.jsxs)("div",{className:"bg-background rounded-xl p-4 text-center",children:[(0,b.jsx)("p",{className:"text-text-muted mb-2",children:"هامش الربح"}),(0,b.jsxs)("p",{className:"text-2xl font-bold text-success",children:[V.totalSales>0?(V.totalProfit/V.totalSales*100).toFixed(1):0,"%"]})]})]})]})]})]})})}a.s(["ReportsContent",()=>u],80243)}];

//# sourceMappingURL=Downloads_arabic-store-management%20%281%29_2c6c304a._.js.map