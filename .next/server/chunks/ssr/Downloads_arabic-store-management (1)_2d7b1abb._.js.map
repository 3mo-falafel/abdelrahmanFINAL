{"version":3,"sources":["../../../../../../Downloads/arabic-store-management%20%281%29/components/debts/debts-content.tsx/__nextjs-internal-proxy.mjs","../../../../../../Downloads/arabic-store-management%20%281%29/app/debts/page.tsx"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport const DebtsContent = registerClientReference(\n    function() { throw new Error(\"Attempted to call DebtsContent() from the server but DebtsContent is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/Downloads/arabic-store-management (1)/components/debts/debts-content.tsx\",\n    \"DebtsContent\",\n);\n","import { createClient } from \"@/lib/supabase/server\"\r\nimport { Sidebar } from \"@/components/sidebar\"\r\nimport { DebtsContent } from \"@/components/debts/debts-content\"\r\nimport type { Order, PaymentHistory } from \"@/lib/types\"\r\n\r\nexport const revalidate = 0\r\nexport const dynamic = 'force-dynamic'\r\n\r\nexport default async function DebtsPage() {\r\n  const supabase = await createClient()\r\n\r\n  // جلب الطلبات المدينة أو المدفوعة جزئياً مع تاريخ الدفعات\r\n  const { data: orders } = await supabase\r\n    .from(\"orders\")\r\n    .select(`\r\n      *,\r\n      items:order_items(*)\r\n    `)\r\n    .in(\"payment_status\", [\"دين\", \"دفع جزئي\"])\r\n    .order(\"created_at\", { ascending: false })\r\n\r\n  // جلب تاريخ جميع الدفعات\r\n  const { data: payments } = await supabase\r\n    .from(\"payment_history\")\r\n    .select(\"*\")\r\n    .order(\"payment_date\", { ascending: false })\r\n\r\n  const debtOrders = (orders || []) as Order[]\r\n  const paymentHistory = (payments || []) as PaymentHistory[]\r\n\r\n  return (\r\n    <div className=\"min-h-screen bg-background flex\">\r\n      <Sidebar />\r\n\r\n      <main className=\"flex-1 p-4 lg:p-8 lg:mr-0\">\r\n        <div className=\"max-w-7xl mx-auto pt-16 lg:pt-0\">\r\n          <DebtsContent orders={debtOrders} paymentHistory={paymentHistory} />\r\n        </div>\r\n      </main>\r\n    </div>\r\n  )\r\n}\r\n"],"names":[],"mappings":"4KAEO,IAAM,EAAe,CAAA,EAAA,AAD5B,EAAA,CAAA,CAAA,OAC4B,uBAAA,AAAuB,EAC/C,WAAa,MAAM,AAAI,MAAM,sOAAwO,EACrQ,yGACA,kEAHG,IAAM,EAAe,CAAA,EAD5B,AAC4B,EAD5B,CAAA,CAAA,OAC4B,uBAAA,AAAuB,EAC/C,WAAa,MAAM,AAAI,MAAM,sOAAwO,EACrQ,qFACA,8ICLJ,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OAMe,eAAe,IAC5B,IAAM,EAAW,MAAM,CAAA,EAAA,EAAA,YAAA,AAAY,IAG7B,CAAE,KAAM,CAAM,CAAE,CAAG,MAAM,EAC5B,IAAI,CAAC,UACL,MAAM,CAAC,CAAC;;;IAGT,CAAC,EACA,EAAE,CAAC,iBAAkB,CAAC,MAAO,WAAW,EACxC,KAAK,CAAC,aAAc,CAAE,UAAW,EAAM,GAGpC,CAAE,KAAM,CAAQ,CAAE,CAAG,MAAM,EAC9B,IAAI,CAAC,mBACL,MAAM,CAAC,KACP,KAAK,CAAC,eAAgB,CAAE,UAAW,EAAM,GAK5C,MACE,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,4CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAO,CAAA,CAAA,GAER,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,qCACd,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,2CACb,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,YAAY,CAAA,CAAC,OATF,CASU,EATA,EAAE,CASU,eARlB,CAQkC,EARtB,EAAE,SAaxC,kCAnCuB,+BADG","ignoreList":[0]}